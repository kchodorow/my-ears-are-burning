package com.meab.dev;

import org.json.JSONArray;
import org.json.JSONObject;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

/**
 * Testing servlet mimicking GitHub notification API.
 */
public class Notifications extends DevServlet {
  @Override
  public void get(HttpServletRequest request, HttpServletResponse response) throws IOException {
    JSONArray array = new JSONArray();
    JSONObject notification = new JSONObject(
      "{\"id\":\"113677963\",\"updated_at\":\"2017-01-23T22:18:38Z\",\"repository\":{\"teams_url\":\"https://api.github.com/repos/tensorflow/tensorflow/teams\",\"blobs_url\":\"https://api.github.com/repos/tensorflow/tensorflow/git/blobs{/sha}\",\"commits_url\":\"https://api.github.com/repos/tensorflow/tensorflow/commits{/sha}\",\"releases_url\":\"https://api.github.com/repos/tensorflow/tensorflow/releases{/id}\",\"compare_url\":\"https://api.github.com/repos/tensorflow/tensorflow/compare/{base}...{head}\",\"git_commits_url\":\"https://api.github.com/repos/tensorflow/tensorflow/git/commits{/sha}\",\"keys_url\":\"https://api.github.com/repos/tensorflow/tensorflow/keys{/key_id}\",\"private\":false,\"id\":45717250,\"downloads_url\":\"https://api.github.com/repos/tensorflow/tensorflow/downloads\",\"milestones_url\":\"https://api.github.com/repos/tensorflow/tensorflow/milestones{/number}\",\"comments_url\":\"https://api.github.com/repos/tensorflow/tensorflow/comments{/number}\",\"description\":\"Computation using data flow graphs for scalable machine learning\",\"name\":\"tensorflow\",\"events_url\":\"https://api.github.com/repos/tensorflow/tensorflow/events\",\"archive_url\":\"https://api.github.com/repos/tensorflow/tensorflow/{archive_format}{/ref}\",\"assignees_url\":\"https://api.github.com/repos/tensorflow/tensorflow/assignees{/user}\",\"subscribers_url\":\"https://api.github.com/repos/tensorflow/tensorflow/subscribers\",\"contributors_url\":\"https://api.github.com/repos/tensorflow/tensorflow/contributors\",\"pulls_url\":\"https://api.github.com/repos/tensorflow/tensorflow/pulls{/number}\",\"stargazers_url\":\"https://api.github.com/repos/tensorflow/tensorflow/stargazers\",\"fork\":false,\"hooks_url\":\"https://api.github.com/repos/tensorflow/tensorflow/hooks\",\"collaborators_url\":\"https://api.github.com/repos/tensorflow/tensorflow/collaborators{/collaborator}\",\"languages_url\":\"https://api.github.com/repos/tensorflow/tensorflow/languages\",\"subscription_url\":\"https://api.github.com/repos/tensorflow/tensorflow/subscription\",\"issues_url\":\"https://api.github.com/repos/tensorflow/tensorflow/issues{/number}\",\"git_tags_url\":\"https://api.github.com/repos/tensorflow/tensorflow/git/tags{/sha}\",\"merges_url\":\"https://api.github.com/repos/tensorflow/tensorflow/merges\",\"git_refs_url\":\"https://api.github.com/repos/tensorflow/tensorflow/git/refs{/sha}\",\"trees_url\":\"https://api.github.com/repos/tensorflow/tensorflow/git/trees{/sha}\",\"url\":\"https://api.github.com/repos/tensorflow/tensorflow\",\"notifications_url\":\"https://api.github.com/repos/tensorflow/tensorflow/notifications{?since,all,participating}\",\"html_url\":\"https://github.com/tensorflow/tensorflow\",\"deployments_url\":\"https://api.github.com/repos/tensorflow/tensorflow/deployments\",\"branches_url\":\"https://api.github.com/repos/tensorflow/tensorflow/branches{/branch}\",\"forks_url\":\"https://api.github.com/repos/tensorflow/tensorflow/forks\",\"owner\":{\"received_events_url\":\"https://api.github.com/users/tensorflow/received_events\",\"organizations_url\":\"https://api.github.com/users/tensorflow/orgs\",\"avatar_url\":\"https://avatars2.githubusercontent.com/u/15658638?v=3\",\"gravatar_id\":\"\",\"gists_url\":\"https://api.github.com/users/tensorflow/gists{/gist_id}\",\"starred_url\":\"https://api.github.com/users/tensorflow/starred{/owner}{/repo}\",\"site_admin\":false,\"type\":\"Organization\",\"url\":\"https://api.github.com/users/tensorflow\",\"id\":15658638,\"html_url\":\"https://github.com/tensorflow\",\"following_url\":\"https://api.github.com/users/tensorflow/following{/other_user}\",\"events_url\":\"https://api.github.com/users/tensorflow/events{/privacy}\",\"login\":\"tensorflow\",\"subscriptions_url\":\"https://api.github.com/users/tensorflow/subscriptions\",\"repos_url\":\"https://api.github.com/users/tensorflow/repos\",\"followers_url\":\"https://api.github.com/users/tensorflow/followers\"},\"statuses_url\":\"https://api.github.com/repos/tensorflow/tensorflow/statuses/{sha}\",\"issue_events_url\":\"https://api.github.com/repos/tensorflow/tensorflow/issues/events{/number}\",\"labels_url\":\"https://api.github.com/repos/tensorflow/tensorflow/labels{/name}\",\"issue_comment_url\":\"https://api.github.com/repos/tensorflow/tensorflow/issues/comments{/number}\",\"tags_url\":\"https://api.github.com/repos/tensorflow/tensorflow/tags\",\"contents_url\":\"https://api.github.com/repos/tensorflow/tensorflow/contents/{+path}\",\"full_name\":\"tensorflow/tensorflow\"},\"reason\":\"mention\",\"subscription_url\":\"https://api.github.com/notifications/threads/113677963/subscription\",\"subject\":{\"title\":\"bazel build error for PolymerElements\",\"type\":\"Issue\",\"url\":\"https://api.github.com/repos/tensorflow/tensorflow/issues/452\",\"latest_comment_url\":\"https://api.github.com/repos/tensorflow/tensorflow/issues/comments/274635704\"},\"unread\":true,\"last_read_at\":\"2016-05-14T11:33:20Z\",\"url\":\"https://api.github.com/notifications/threads/113677963\"}");
    array.put(notification);
    response.getWriter().write(array.toString());
  }
}
